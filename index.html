<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ë‚˜ë§Œì˜ ê³„íší‘œ (í†µí•©íŒ)</title>
<style>
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif;background:#f6f7fb;color:#0f172a}
  .wrap{max-width:960px;margin:28px auto;padding:16px}
  .card{background:#fff;border:1px solid #e9ecf3;border-radius:16px;box-shadow:0 6px 16px rgba(20,32,60,.06);margin-bottom:20px;overflow:hidden}
  h1{margin:0 0 8px;font-size:22px}
  h2{margin:0 0 6px;font-size:18px}
  .section{padding:16px}
  .input-row{display:flex;gap:10px}
  .input-row input{flex:1;padding:10px;border:1px solid #e9ecf3;border-radius:10px}
  button{cursor:pointer;border:0;border-radius:10px;padding:8px 12px;background:#22c55e;color:#fff;font-weight:600}
  ul{list-style:none;padding:0;margin:12px 0 0}
  li{padding:8px;border-bottom:1px solid #eee}
  li.completed{text-decoration:line-through;color:#999}
</style>
</head>
<body>
<div class="wrap">
  <!-- ê°„ë‹¨ To-Do ë¦¬ìŠ¤íŠ¸ -->
  <div class="card">
    <div class="section">
      <h1>âœ¨ ì˜¤ëŠ˜ì˜ ëª©í‘œ (ê°„ë‹¨ ë²„ì „)</h1>
      <div class="input-row">
        <input type="text" id="simpleTaskInput" placeholder="ìƒˆë¡œìš´ ëª©í‘œë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”!">
        <button id="simpleAddBtn">ì¶”ê°€</button>
      </div>
      <ul id="simpleTaskList">
        <li>ì½”ë”© ê³µë¶€ 1ì‹œê°„ í•˜ê¸°</li>
        <li class="completed">ë°˜ë ¤ë™ë¬¼ê³¼ ì‚°ì±… ë‹¤ë…€ì˜¤ê¸°</li>
        <li>ìƒˆë¡œìš´ íŒ¨ì…˜ ìŠ¤íƒ€ì¼ ì°¾ì•„ë³´ê¸°</li>
      </ul>
    </div>
  </div>

  <!-- ê³ ê¸‰ ê³„íší‘œ -->
  <div class="card">
    <div class="section">
      <h1>ğŸ“… ë‚˜ë§Œì˜ ê³„íší‘œ (í™•ì¥ ê¸°ëŠ¥)</h1>
      <p style="color:#6b7280;font-size:13px;margin:0 0 12px">ë‚ ì§œë³„ í•  ì¼ ì €ì¥ Â· ì™„ë£Œìœ¨ Â· ì£¼ê°„ ë©”ëª¨ Â· JSON ë‚´ë³´ë‚´ê¸°</p>

      <div class="input-row" style="margin-bottom:10px">
        <input type="date" id="datePick">
        <button id="todayBtn">ì˜¤ëŠ˜</button>
      </div>

      <h2>ì˜¤ëŠ˜ì˜ ëª©í‘œ</h2>
      <div class="input-row">
        <input type="text" id="taskInput" placeholder="ì˜ˆ) ìš´ë™ 30ë¶„, ì±… ì½ê¸°">
        <button id="addBtn">ì¶”ê°€</button>
      </div>
      <ul id="taskList"></ul>

      <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
        <button id="clearDone">ì™„ë£Œ ëª¨ë‘ ì§€ìš°ê¸°</button>
        <button id="exportBtn">ë‚´ë³´ë‚´ê¸°(JSON)</button>
        <input type="file" id="importFile" accept="application/json">
      </div>
    </div>
  </div>
</div>

<script>
/* ====== ê°„ë‹¨ To-Do ë¦¬ìŠ¤íŠ¸ ====== */
const simpleInput=document.getElementById("simpleTaskInput");
const simpleBtn=document.getElementById("simpleAddBtn");
const simpleList=document.getElementById("simpleTaskList");
simpleBtn.addEventListener("click",()=>{
  if(simpleInput.value.trim()){
    const li=document.createElement("li");
    li.textContent=simpleInput.value;
    li.addEventListener("click",()=>li.classList.toggle("completed"));
    simpleList.appendChild(li);
    simpleInput.value="";
  }
});

/* ====== ê³ ê¸‰ ê³„íší‘œ ====== */
const $=s=>document.querySelector(s);
const taskInput=$("#taskInput");
const addBtn=$("#addBtn");
const taskList=$("#taskList");
const datePick=$("#datePick");
const todayBtn=$("#todayBtn");
const clearBtn=$("#clearDone");
const exportBtn=$("#exportBtn");
const importFile=$("#importFile");

const fmt=d=>d.toISOString().slice(0,10);
const KEY=ymd=>`plan.${ymd}`;
function loadTasks(date){return JSON.parse(localStorage.getItem(KEY(fmt(date)))||'[]')}
function saveTasks(date,arr){localStorage.setItem(KEY(fmt(date)),JSON.stringify(arr))}
function renderTasks(date){
  const arr=loadTasks(date);taskList.innerHTML='';
  arr.forEach((t,i)=>{
    const li=document.createElement("li");
    li.textContent=t.text;
    if(t.done) li.classList.add("completed");
    li.addEventListener("click",()=>{
      arr[i].done=!arr[i].done;saveTasks(date,arr);renderTasks(date);
    });
    taskList.appendChild(li);
  })
}
addBtn.addEventListener("click",()=>{
  if(taskInput.value.trim()){
    const d=new Date(datePick.value);
    const arr=loadTasks(d);arr.push({text:taskInput.value,done:false});
    saveTasks(d,arr);renderTasks(d);taskInput.value="";
  }
});
todayBtn.addEventListener("click",()=>{
  const t=new Date();datePick.value=fmt(t);renderTasks(t);
});
datePick.addEventListener("change",()=>renderTasks(new Date(datePick.value)));
clearBtn.addEventListener("click",()=>{
  const d=new Date(datePick.value);
  const arr=loadTasks(d).filter(t=>!t.done);
  saveTasks(d,arr);renderTasks(d);
});
exportBtn.addEventListener("click",()=>{
  const d=new Date(datePick.value);
  const arr=loadTasks(d);
  const blob=new Blob([JSON.stringify(arr)],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);a.download=`plan_${fmt(d)}.json`;a.click();
});
importFile.addEventListener("change",e=>{
  const file=e.target.files[0];if(!file)return;
  const r=new FileReader();
  r.onload=()=>{
    const arr=JSON.parse(r.result);
    const d=new Date(datePick.value);
    saveTasks(d,arr);renderTasks(d);
  };
  r.readAsText(file);
});
(function init(){
  const t=new Date();datePick.value=fmt(t);renderTasks(t);
})();
</script>
</body>
</html>
